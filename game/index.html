<!DOCTYPE html>
<html>
	<head>
		<title>TetrEscape</title>
		
		<!-- PWA features -->
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="manifest" href="manifest.webmanifest" />
		<meta name="mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="theme-color" content="#3b3a3d" />
		<script type="text/javascript">
			window.addEventListener('load', function () {
				if (!navigator.serviceWorker) {
					console.log('TetrEscape will not work offline in this browser because it does not support service workers.');
					return;
				}
				navigator.serviceWorker.register('/service_worker.js').then(function (registration) {
					console.log('Service worker registered with scope: ' + registration.scope);
				}).catch(function (err) {
					console.log('Service worker registration failed: ' + err);
				});
			});
		</script>
		
		<!-- Icons -->
		<link rel="shortcut icon" type="image/x-icon" href="images/logo/favicon.ico" />
		<link rel="icon" sizes="128x128" href="images/logo/icon_128.png" />
		<link rel="apple-touch-icon-precomposed" sizes="128x128" href="images/logo/icon_128.png" />
		
		<!-- Style sheets -->
		<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Roboto+Slab:400,400italic,500,500italic,700,700italic" />
		<link rel="stylesheet" type="text/css" href="styles/styles.css" />
		<link rel="stylesheet" type="text/css" href="styles/animations.css" />
		
		<!-- External libraries and polyfills -->
		<script type="text/javascript" src="scripts/lib/controller.min.js"></script>
		<script type="text/javascript" src="scripts/lib/polyfills.js"></script>
		<script type="text/javascript" src="scripts/lib/raf.js"></script>
		<script type="text/javascript" src="scripts/lib/hammer.min.js"></script>
		<script type="text/javascript" src="scripts/lib/material-touch.js"></script>
		<script type="text/javascript" src="scripts/lib/vector2d.js"></script>
		
		<!-- Helper classes -->
		<script type="text/javascript" src="scripts/color.js"></script>
		<script type="text/javascript" src="scripts/input_manager.js"></script>
		<script type="text/javascript" src="scripts/tween.js"></script>
		<script type="text/javascript" src="scripts/utils.js"></script>
		
		<!-- Menu navigation classes -->
		<script type="text/javascript" src="scripts/titleparticle.js"></script>
		<script type="text/javascript" src="scripts/view.js"></script>
		<script type="text/javascript" src="scripts/menuview.js"></script>
		<script type="text/javascript" src="scripts/gameview.js"></script>
		<script type="text/javascript" src="scripts/titleview.js"></script>
		<script type="text/javascript" src="scripts/optionsview.js"></script>
		<script type="text/javascript" src="scripts/menus.js"></script>
		
		<!-- Game classes -->
		<script type="text/javascript" src="scripts/game/game.js"></script>
		<script type="text/javascript" src="scripts/game/grid.js"></script>
		<script type="text/javascript" src="scripts/game/grid_occupant.js"></script>
		<script type="text/javascript" src="scripts/game/player.js"></script>
		<script type="text/javascript" src="scripts/game/goal.js"></script>
		<script type="text/javascript" src="scripts/game/block.js"></script>
		<script type="text/javascript" src="scripts/game/static_block.js"></script>
		<script type="text/javascript" src="scripts/game/tetromino.js"></script>
		<script type="text/javascript" src="scripts/game/level.js"></script>
	</head>
	<body class="has-ads">
		<div class="view" id="title-screen">
			<img src="images/logo/title.png" alt="TetrEscape" id="title" />
			<div class="menu">
				<button class="z1" id="play-button">Play</button>
				<button class="z1" id="instructions-button">How to play</button>
				<button class="z1" id="options-button">Options</button>
				<button class="z1" id="about-button">About</button>
			</div>
			<div id="title-glow1"></div>
			<div id="title-glow2"></div>
			<canvas id="title-canvas"></canvas>
		</div>
		
		<div class="view" id="instructions-screen">
			<header role="toolbar" class="top-bar z2">
				<button class="back-button" aria-label="Back" title="Back (Esc)"></button><!--
				-->How to play
			</header>
			<section class="menu">
				<div class="instructions-group">
					<img src="images/instructions/touch.png" alt="Use touch swipes to move." class="instructions-touch" />
					<img src="images/instructions/arrow_keys.png" alt="Use the arrow keys to move." class="instructions-keyboard" />
					<img src="images/instructions/d-pad.png" alt="Use the directional pad to move." class="instructions-gamepad" />
					<p>
						Move around using
						<span class="instructions-touch wrap-point">touch swipes.</span>
						<span class="instructions-keyboard wrap-point">the arrow keys</span>
						<span class="instructions-keyboard wrap-point">(or WASD).</span>
						<span class="instructions-gamepad wrap-point">the directional pad</span>
						<span class="instructions-gamepad wrap-point">(or control stick).</span>
					</p>
				</div>
				<div class="instructions-group">
					<img src="images/instructions/blocks.png" alt="Fill a row with blocks." class="instructions-blocks" />
					<p>Fill a row with blocks to clear them.</p>
				</div>
				<div class="instructions-group">
					<img src="images/instructions/goal.png" alt="The exit portal." style="width: 128px;" />
					<p>
						Slide blocks around, and
						<span class="wrap-point">try to reach the exit portal!</span>
					</p>
				</div>
				<div class="instructions-group">
					<img src="images/instructions/moves_blocks_stars.png" alt="Icons for moves, blocks cleared, and stars." style="width: 96px;" />
					<p>
						Earn stars for getting there in the fewest moves or
						<span class="wrap-point">clearing the most blocks.</span>
					</p>
				</div>
			</section>
		</div>
		
		<div class="view" id="options-screen">
			<header role="toolbar" class="top-bar z2">
				<button class="back-button" aria-label="Back" title="Back (Esc)"></button><!--
				-->Options
			</header>
			<section class="menu">
				<div class="options-input-group">
					<div>
						<h2>Gamepad controls</h2>
						<select id="gamepad-controls-select">
							<option value="microsoft">Microsoft</option>
							<option value="nintendo">Nintendo</option>
						</select>
					</div>
					<img src="images/options/gamepad_controls_microsoft.png" alt="Gamepad with the right face button labeled, Back, and the bottom face button labeled, Select." class="options-gamepad-controls-microsoft" />
					<img src="images/options/gamepad_controls_nintendo.png" alt="Gamepad with the right face button labeled, Select, and the bottom face button labeled, Back." class="options-gamepad-controls-nintendo" />
				</div>
				<div class="options-input-group">
					<div>
						<h2>Ads</h2>
						<button id="remove-ads-button">Remove ads</button>
					</div>
					<img src="images/options/remove_ads.png" alt="Remove ads graphic." />
				</div>
				<div class="options-input-group">
					<div>
						<h2>Reset</h2>
						<button id="reset-button">Reset all scores</button>
					</div>
					<img src="images/options/reset_scores.png" alt="Bomb reset graphic." />
				</div>
			</section>
		</div>
		
		<div class="view" id="about-screen">
			<header role="toolbar" class="top-bar z2">
				<button class="back-button" aria-label="Back" title="Back (Esc)"></button><!--
				-->About TetrEscape
			</header>
			<section class="menu">
				<br />
				<br />
				<br />
				<h1><img src="images/logo/credits_logo.png" alt="TetrEscape" style="width: 321px;" /></h1>
				<h2>Creation, design, development</h2>
				<ul>
					<li><a href="http://zmyaro.com" target="_blank">Zachary Yaro</a></li>
				</ul>
				<br />
				<h2>Art</h2>
				<ul>
					<li><a href="https://zmyaro.com" target="_blank">Zachary Yaro</a></li>
				</ul>
				<br />
				<h2>Sound</h2>
				<ul>
					<li>
						<a href="https://freesound.org/people/Breviceps" target="_blank">Breviceps</a>
						<svg role="img" class="icon" viewBox="0 0 1024 1024">
							<title>Creative Commons 0 License</title>
							<use href="images/icons/cc_zero.svg#icon"></use>
						</svg>
					</li>
					<li>
						<a href="https://freesound.org/people/Leszek_Szary" target="_blank">Leszek_Szary</a>
						<svg role="img" class="icon" viewBox="0 0 1024 1024">
							<title>Creative Commons 0 License</title>
							<use href="images/icons/cc_zero.svg#icon"></use>
						</svg>
					</li>
					<li>
						<a href="https://freesound.org/people/Link-Boy" target="_blank">Link-Boy</a>
						<svg role="img" class="icon" viewBox="0 0 1024 1024">
							<title>Creative Commons 0 License</title>
							<use href="images/icons/cc_zero.svg#icon"></use>
						</svg>
					</li>
					<li><a href="https://zmyaro.com" target="_blank">Zachary Yaro</a></li>
				</ul>
				<br />
				<h2>Libraries &amp; references</h2>
				<ul>
					<li><a href="https://samiare.github.io/Controller.js" target="_blank">Controller.js</a></li>
					<li><a href="http://freesound.org" target="_blank">Freesound.org</a></li>
					<li><a href="http://hammerjs.github.io" target="_blank">Hammer.js</a></li>
					<li><a href="https://material.io" target="_blank">Material Design</a></li>
					<li><a href="https://materialz.dev" target="_blank">MaterialZ</a></li>
					<li><a href="https://gist.github.com/paulirish/1579671" target="_blank">Erik M&ouml;ller and Paul Irish's requestAnimationFrame polyfill</a></li>
				</ul>
				<br />
				<h2>Inspirations</h2>
				<ul>
					<li><a href="https://www.sokoban.jp" target="_blank">Sokoban</a></li>
					<li><a href="https://tetris.com" target="_blank">Tetris</a></li>
					<li>Various escape room series</li>
				</ul>
				<br />
				<h2>Morale</h2>
				<ul>
					<li>Coffee Benjamin &ldquo;Bean&rdquo; Braun</li>
					<li>Soba Noodle Braun</li>
				</ul>
				<br />
				<p>Dedicated to everyone who has ever been a round peg in a square hole.</p>
				<br />
				<br />
				<a href="https://inprod.co" target="_blank"><img src="images/inprod_logo.png" alt="Inverted Productions" style="width: 503px;" /></a>
				<p style="font-size: 75%; margin-top: -2.5em;">
					&copy; 2022
				</p>
				<br />
				<br />
				<br />
				<p style="font-size: 75%;">
					(Version 0.9.0 beta)
				</p>
			</section>
		</div>
		
		<div class="view" id="level-screen">
			<header role="toolbar" class="top-bar z2">
				<button class="back-button" aria-label="Back" title="Back (Esc)"></button><!--
				-->Select level
			</header>
			<div class="menu">
				<ul></ul>
			</div>
		</div>
		
		<div class="view" id="game-screen">
			<header role="toolbar" class="top-bar z1">
				<button class="back-button close-button" aria-label="Quit" title="Quit (Esc)"></button>
				<span id="level-name-display"></span>
				<button id="restart-button" aria-label="Retry" title="Retry (R)"></button>
				<span class="score-display" title="Moves">
					<img alt="Moves" src="images/icons/moves.png" class="icon" />
					<span id="moves-display"></span>
				</span><!--
				--><span class="score-display"title="Blocks cleared">
					<img alt="Blocks cleared" src="images/icons/blocks.png" class="icon" />
					<span id="blocks-display"></span>
				</span>
			</header>
			<canvas id="game-canvas" width="640" height="480"></canvas>
			<figure id="control-hint"></figure>
		</div>
		
		<div class="view" id="results-screen">
			<h1 id="resultsTitle">Level complete!</h1>
			<h2 id="resultsScore"></h2>
			<div class="star"></div>
			<div class="star"></div>
			<div class="star"></div>
			<br />
			<br />
			<br />
			Best scores:
			<div class="stars"></div>
			<br />
			<div class="menu">
				<button class="z1" id="results-back-button">Level select</button>
				<!--<button class="z1" id="resultsReplayButton">Replay level</button>-->
			</div>
			<button>
		</div>
		
		<div id="ad-container">[Ad not loaded]</div>
		
		<audio src="audio/block_slide.mp3" id="move-sound"></audio>
		<audio src="audio/block_hit.mp3" id="cannot-move-sound"></audio>
		<audio src="audio/win.mp3" id="win-sound"></audio>
	</body>
</html>
