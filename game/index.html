<!DOCTYPE html>
<html>
	<head>
		<title>TetrEscape</title>
		
		<link rel="stylesheet" type="text/css" href="styles/material-elements.css" />
		<link rel="stylesheet" type="text/css" href="styles/material-widgets.css" />
		<link rel="stylesheet" type="text/css" href="styles/material-depth.css" />
		<link rel="stylesheet" type="text/css" href="styles/styles.css" />
		
		<script type="text/javascript" src="scripts/color.js"></script>
		<script type="text/javascript" src="scripts/vector2d.js"></script>
		<script type="text/javascript" src="scripts/game.js"></script>
		<script type="text/javascript" src="scripts/inputmanager.js"></script>
		<script type="text/javascript" src="scripts/grid.js"></script>
		<script type="text/javascript" src="scripts/gridoccupant.js"></script>
		<script type="text/javascript" src="scripts/player.js"></script>
		<script type="text/javascript" src="scripts/goal.js"></script>
		<script type="text/javascript" src="scripts/block.js"></script>
		<script type="text/javascript" src="scripts/tetromino.js"></script>
		<script type="text/javascript" src="scripts/level.js"></script>
		
		<script type="text/javascript" src="scripts/menu.js"></script>
		
		<script type="text/javascript">
			var menus,
				game;
			
			window.onload = function () {
				var levelButtons = document.getElementsByClassName('levelButton');
				for (var i = 0; i < levelButtons.length; i++) {
					levelButtons[i].onclick = function () {
						this.menu.suspend();
						menus.game.open();
						startGame(this.dataset.level);
					};
				}
				
				menus = {
					level: new Menu(document.getElementById('levelMenu')),
					game: new Menu(document.getElementById('canvas'))
				};
				
				menus.level.open();
			};
			
			function startGame(level) {
				game = null;
				game = new Game(menus.game.elem, LEVELS[level], endGame);
			}
			
			function endGame() {
				game = undefined;
				menus.game.close();
				menus.level.resume();
			}
		</script>
	</head>
	<body>
		
		<div class="menu z1" id="levelMenu">
			<header class="appBar">Select level</header>
			<button class="levelButton z1" data-level="0">
				1
			</button>
			<button class="levelButton z1" data-level="1">
				2
			</button>
			<button class="levelButton z1" data-level="2">
				3
			</button>
			<button class="levelButton z1" data-level="3">
				4
			</button>
			<button class="levelButton z1" data-level="4">
				5
			</button>
			<button class="levelButton z1" data-level="5">
				6
			</button>
			<button class="levelButton z1" data-level="6">
				7
			</button>
		</div>
		
		<canvas class="menu z1" id="canvas" width="640" height="480"></canvas>
	</body>
</html>
